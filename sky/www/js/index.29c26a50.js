import{e as A,_ as Z,f as G,c as Q,a as W,r as ee}from"../index.js";/* empty css              *//* empty css              *//* empty css               *//* empty css              */import{r as h,f as E,J as c,K as g,l as e,aP as a,u as I,F as S,b3 as U,N as y,aZ as P,a_ as $,aO as q,b7 as R,b8 as H,bl as J,bm as K,bn as le,bo as te,aY as M,aX as X,be as ae,bc as oe,L as B,b1 as F,bp as D,aT as ne}from"./arco.4b5efef7.js";import{F as se,i as ie,T as ue,s as de}from"./index.07bd47a8.js";import{u as N}from"./loading.3da5f6c1.js";import{g as re,u as pe}from"./vue.54530f4c.js";import{I as me,P as ce,i as ve}from"./passwords.4504130c.js";/* empty css               */import"./vendor.339f51bb.js";const _e=()=>A.get("/position/area"),fe=_=>A.get("/position/state",{params:_}),ye=_=>A.get("/position/city",{params:_}),ge={__name:"index",props:{modelValue:{type:Object,required:!0},geo:{type:Object,default:()=>({nation:!1,city:!1})}},emits:["update:modelValue"],setup(_,{emit:x}){const{loading:L,setLoading:w}=N(),{loading:k,setLoading:b}=N(),{loading:m,setLoading:n}=N(),s=x,V=_,t=h([]),l=h([]),v=h([]),o=E({get(){return V.modelValue},set(u){s("update:modelValue",u)}}),d=async()=>{t.value=[];try{w(!0);const{data:u}=await _e();t.value=u}catch{}finally{w(!1)}},f=async()=>{if(l.value=[],!!o.value.area)try{b(!0);const{data:u}=await fe({area:o.value.area});l.value=u}catch{}finally{b(!1)}},C=async()=>{if(v.value=[],!(!o.value.area&&!o.value.state))try{n(!0);const{data:u}=await ye({area:o.value.area,state:o.value.state});v.value=u}catch{}finally{n(!1)}},z=()=>{o.value.state="",o.value.city=""};return(u,i)=>{const p=R,T=H,j=J,Y=K;return c(),g("div",null,[e(Y,{model:o.value,"auto-label-width":"","label-align":"left"},{default:a(()=>[e(j,{field:"area",label:u.$t("position.location.nation"),style:{width:"340px"}},{default:a(()=>[e(T,{modelValue:o.value.area,"onUpdate:modelValue":i[0]||(i[0]=r=>o.value.area=r),placeholder:u.$t("position.select.nation"),disabled:!_.geo.nation,loading:I(L),"allow-search":"","allow-clear":"",onPopupVisibleChange:i[1]||(i[1]=r=>{r&&d()}),onChange:z},{default:a(()=>[(c(!0),g(S,null,U(t.value,(r,O)=>(c(),g("div",{key:O,style:{display:"flex","align-items":"center"}},[y("span",null,[e(I(se),{country:r.code,size:"small"},null,8,["country"])]),e(p,{value:r.code},{default:a(()=>[P($(r.name_en),1)]),_:2},1032,["value"])]))),128))]),_:1},8,["modelValue","placeholder","disabled","loading"])]),_:1},8,["label"]),e(j,{field:"state",label:u.$t("position.location.state"),style:{width:"340px"}},{default:a(()=>[e(T,{modelValue:o.value.state,"onUpdate:modelValue":i[2]||(i[2]=r=>o.value.state=r),placeholder:u.$t("position.select.state"),disabled:!_.geo.city||!!o.value.city,"allow-search":"","allow-clear":"",loading:I(k),onPopupVisibleChange:i[3]||(i[3]=r=>{r&&f()})},{default:a(()=>[(c(!0),g(S,null,U(l.value,(r,O)=>(c(),q(p,{key:O,label:r.name_en,value:r.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","disabled","loading"])]),_:1},8,["label"]),e(j,{field:"city",label:u.$t("position.location.city"),style:{width:"340px"}},{default:a(()=>[e(T,{modelValue:o.value.city,"onUpdate:modelValue":i[4]||(i[4]=r=>o.value.city=r),placeholder:u.$t("position.select.city"),disabled:!_.geo.city||!!o.value.state,"allow-search":"","allow-clear":"",loading:I(m),onPopupVisibleChange:i[5]||(i[5]=r=>{r&&C()})},{default:a(()=>[(c(!0),g(S,null,U(v.value,(r,O)=>(c(),q(p,{key:O,label:r.name_en,value:r.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","disabled","loading"])]),_:1},8,["label"])]),_:1},8,["model"])])}}};const be={__name:"index",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(_,{emit:x}){const{loading:L,setLoading:w}=N(),k=x,b=_,m=h([]),n=h([]),s=E({get(){return b.modelValue},set(t){k("update:modelValue",t)}});return(async()=>{try{w(!0);const{data:t}=await ve(),l=t.login_white_list;t.proxy_white_list.forEach(v=>{l.includes(v)||l.push(v)}),m.value=l,n.value=t.proxy_users}catch{}finally{w(!1)}})(),(t,l)=>{const v=le,o=J,d=R,f=H,C=te,z=M,u=X,i=K;return c(),g("div",null,[e(i,{model:s.value,"auto-label-width":"","label-align":"left",loading:I(L)},{default:a(()=>[e(o,{field:"internal_name",label:t.$t("normal.internal.name"),style:{width:"280px"}},{default:a(()=>[e(v,{modelValue:s.value.internal_name,"onUpdate:modelValue":l[0]||(l[0]=p=>s.value.internal_name=p),placeholder:t.$t("normal.placeholder.internal.name")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(o,{field:"protocol",label:t.$t("normal.proxy.protocol"),style:{width:"280px"}},{default:a(()=>[e(f,{modelValue:s.value.protocol,"onUpdate:modelValue":l[1]||(l[1]=p=>s.value.protocol=p),style:{width:"320px"},placeholder:t.$t("normal.select.proxy.protocol")},{default:a(()=>[e(d,{label:"Skyproxy",value:"trojan"}),e(d,{label:"Socks5/HTTP(s)",value:"mixed"})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),e(o,{field:"port",label:t.$t("normal.proxy.port"),style:{width:"280px"}},{default:a(()=>[e(z,null,{default:a(()=>[e(C,{modelValue:s.value.port,"onUpdate:modelValue":l[2]||(l[2]=p=>s.value.port=p),step:1,min:2e3,max:65e3,precision:0,mode:"button"},null,8,["modelValue"])]),_:1})]),_:1},8,["label"]),e(o,{field:"whitelist_ips",label:t.$t("normal.whitelist.ip")},{default:a(()=>[e(me,{modelValue:s.value.whitelist_ips,"onUpdate:modelValue":l[3]||(l[3]=p=>s.value.whitelist_ips=p),list:m.value},null,8,["modelValue","list"])]),_:1},8,["label"]),e(o,{field:"proxy_users",label:t.$t("normal.proxy.account")},{default:a(()=>[e(ce,{modelValue:s.value.proxy_users,"onUpdate:modelValue":l[4]||(l[4]=p=>s.value.proxy_users=p),list:n.value},null,8,["modelValue","list"])]),_:1},8,["label"]),e(o,{field:"multiply",label:t.$t("normal.batch.ports")},{default:a(()=>[s.value.multiply==0?(c(),q(u,{key:0,type:"text",onClick:l[5]||(l[5]=p=>s.value.multiply=1)},{default:a(()=>[P($(t.$t("normal.enable")),1)]),_:1})):(c(),g(S,{key:1},[e(C,{modelValue:s.value.multiply,"onUpdate:modelValue":l[6]||(l[6]=p=>s.value.multiply=p),style:{width:"120px"},"default-value":500,precision:0,min:1,mode:"button"},null,8,["modelValue"]),e(u,{type:"text",onClick:l[7]||(l[7]=p=>s.value.multiply=0)},{default:a(()=>[P($(t.$t("normal.disable")),1)]),_:1})],64))]),_:1},8,["label"])]),_:1},8,["model","loading"])])}}},Ve={__name:"index",props:{modelValue:{type:Object,required:!0},geo:{type:Object,default:()=>({nation:!1,city:!1})}},emits:["update:modelValue"],setup(_,{emit:x}){const L=x,w=_,k=[{label:"Remote",value:"remote"},{label:"Local",value:"local"}],b=[{label:"Prefer IPv4",value:"prefer_ipv4"},{label:"Prefer IPv6",value:"prefer_ipv6"},{label:"IPv4 Only",value:"ipv4_only"},{label:"IPv6 Only",value:"ipv6_only"}],m=[{label:"10min",value:10},{label:"15min",value:15},{label:"30min",value:30},{label:"60min",value:60}],n=E({get(){return w.modelValue},set(s){L("update:modelValue",s)}});return(s,V)=>{const t=R,l=H,v=J,o=K;return c(),g("div",null,[e(o,{model:n.value,"auto-label-width":"","label-align":"left"},{default:a(()=>[e(v,{field:"session",label:"Session Duration",style:{width:"300px"}},{default:a(()=>[e(l,{modelValue:n.value.session,"onUpdate:modelValue":V[0]||(V[0]=d=>n.value.session=d)},{default:a(()=>[(c(),g(S,null,U(m,(d,f)=>e(t,{key:f,label:d.label,value:d.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(v,{field:"dns_mode",label:"DNS lookup",style:{width:"380px"}},{default:a(()=>[e(l,{modelValue:n.value.dns_mode,"onUpdate:modelValue":V[1]||(V[1]=d=>n.value.dns_mode=d)},{default:a(()=>[(c(),g(S,null,U(k,(d,f)=>e(t,{key:f,label:d.label,value:d.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(v,{field:"dns_strategy",label:"DNS strategy",style:{width:"380px"}},{default:a(()=>[e(l,{modelValue:n.value.dns_strategy,"onUpdate:modelValue":V[2]||(V[2]=d=>n.value.dns_strategy=d)},{default:a(()=>[(c(),g(S,null,U(b,(d,f)=>e(t,{key:f,label:d.label,value:d.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])])}}};const we={style:{padding:"22px"}},$e={style:{"font-weight":"bold","font-size":"18px"}},xe={style:{"font-weight":"bold","font-size":"18px"}},Le={class:"tab"},ke={style:{"padding-top":"16px"}},he={__name:"index",setup(_){const x=re(),{t:L}=pe(),w=x.query.id,{loading:k,setLoading:b}=N(),m=h(1),n=h({area:null,state:null,city:null,internal_name:null,port:null,whitelist_ips:[],multiply:0,session:10,geo:{nation:!1,city:!1},zone_id:null,dns_mode:"remote",dns_strategy:"prefer_ipv4"}),s=async()=>{try{b(!0),await de({...n.value}),ne.success(L("portsetting.save.success")),ee.back()}catch{}finally{b(!1)}};return(async()=>{try{b(!0);const{data:t}=await ie({id:w});n.value=t}catch{}finally{b(!1)}})(),(t,l)=>{const v=M,o=X,d=G,f=ae,C=Q,z=W,u=oe;return c(),g("div",we,[e(u,{loading:I(k)},{default:a(()=>[e(ue,{style:{"margin-bottom":"8px"}},{right:a(()=>[e(o,{type:"primary",onClick:s},{default:a(()=>[P($(t.$t("portsetting.save.settings")),1)]),_:1})]),default:a(()=>[e(v,null,{default:a(()=>[y("span",$e,$(t.$t("portsetting.proxy.zone")),1),y("span",xe,$(n.value.zone_name),1)]),_:1})]),_:1}),y("div",Le,[e(f,{content:t.$t("portsetting.select.specific.location")},{default:a(()=>[y("div",{class:B(["tab-item",{active:m.value==1}]),onClick:l[0]||(l[0]=i=>m.value=1)},[e(d,{size:22}),y("span",null,$(t.$t("portsetting.location")),1)],2)]),_:1},8,["content"]),e(f,{content:t.$t("portsetting.general.config")},{default:a(()=>[y("div",{class:B(["tab-item",{active:m.value==2}]),onClick:l[1]||(l[1]=i=>m.value=2)},[e(C,{size:22}),P($(t.$t("portsetting.common")),1)],2)]),_:1},8,["content"]),e(f,{content:t.$t("portsetting.switch.ip.conditions")},{default:a(()=>[y("div",{class:B(["tab-item",{active:m.value==3}]),onClick:l[2]||(l[2]=i=>m.value=3)},[e(z,{size:22}),P($(t.$t("portsetting.ip.control")),1)],2)]),_:1},8,["content"])]),y("div",ke,[F(y("div",null,[e(ge,{modelValue:n.value,"onUpdate:modelValue":l[3]||(l[3]=i=>n.value=i),geo:n.value.geo},null,8,["modelValue","geo"])],512),[[D,m.value==1]]),F(y("div",null,[e(be,{modelValue:n.value,"onUpdate:modelValue":l[4]||(l[4]=i=>n.value=i)},null,8,["modelValue"])],512),[[D,m.value==2]]),F(y("div",null,[e(Ve,{modelValue:n.value,"onUpdate:modelValue":l[5]||(l[5]=i=>n.value=i)},null,8,["modelValue"])],512),[[D,m.value==3]])])]),_:1},8,["loading"])])}}},De=Z(he,[["__scopeId","data-v-c3e0ed7c"]]);export{De as default};
