import{e as D,_ as Y,f as Z,c as G,a as Q,r as W}from"../index.js";/* empty css              *//* empty css              *//* empty css               *//* empty css              */import{r as L,f as F,J as y,K as x,l as e,aP as l,u as z,F as I,b3 as P,aO as T,b7 as A,b8 as E,bk as R,bl as H,aZ as C,bm as ee,bn as le,aX as J,aY as K,be as ae,bc as te,N as V,a_ as oe,L as j,b1 as B,bo as q,aT as ne,a$ as se,b0 as ue}from"./arco.73db23e5.js";import{b as ie,i as de,T as re,s as pe}from"./index.fed51933.js";import{u as N}from"./loading.a8216e84.js";import{g as me}from"./vue.57427092.js";import{I as ce,P as _e,i as ve}from"./passwords.0ec8fba8.js";/* empty css               */import"./vendor.7cd83524.js";const fe=()=>D.get("/position/area"),ye=r=>D.get("/position/state",{params:r}),be=r=>D.get("/position/city",{params:r}),ge={__name:"index",props:{modelValue:{type:Object,required:!0},geo:{type:Object,default:()=>({nation:!1,city:!1})}},emits:["update:modelValue"],setup(r,{emit:S}){const{loading:k,setLoading:g}=N(),{loading:w,setLoading:c}=N(),{loading:p,setLoading:v}=N(),s=S,f=r,u=L([]),i=L([]),a=L([]),n=F({get(){return f.modelValue},set(_){s("update:modelValue",_)}}),t=async()=>{u.value=[];try{g(!0);const{data:_}=await fe();u.value=_}catch{}finally{g(!1)}},b=async()=>{if(i.value=[],!!n.value.area)try{c(!0);const{data:_}=await ye({area:n.value.area});i.value=_}catch{}finally{c(!1)}},U=async()=>{if(a.value=[],!(!n.value.area&&!n.value.state))try{v(!0);const{data:_}=await be({area:n.value.area,state:n.value.state});a.value=_}catch{}finally{v(!1)}};return(_,o)=>{const h=A,$=E,m=R,X=H;return y(),x("div",null,[e(X,{model:n.value,"auto-label-width":"","label-align":"left"},{default:l(()=>[e(m,{field:"area",label:"\u5B9A\u4F4D\u56FD\u5BB6",style:{width:"300px"}},{default:l(()=>[e($,{modelValue:n.value.area,"onUpdate:modelValue":o[0]||(o[0]=d=>n.value.area=d),placeholder:"\u8BF7\u9009\u62E9\u56FD\u5BB6",disabled:!r.geo.nation,loading:z(k),"allow-search":"","allow-clear":"",onPopupVisibleChange:o[1]||(o[1]=d=>{d&&t()})},{default:l(()=>[(y(!0),x(I,null,P(u.value,(d,O)=>(y(),T(h,{key:O,label:d.name_en,value:d.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled","loading"])]),_:1}),e(m,{field:"state",label:"\u5B9A\u4F4D\u5DDE/\u7701",style:{width:"300px"}},{default:l(()=>[e($,{modelValue:n.value.state,"onUpdate:modelValue":o[2]||(o[2]=d=>n.value.state=d),placeholder:"\u8BF7\u9009\u62E9\u5DDE/\u7701",disabled:!r.geo.city||!!n.value.city,"allow-search":"","allow-clear":"",loading:z(w),onPopupVisibleChange:o[3]||(o[3]=d=>{d&&b()})},{default:l(()=>[(y(!0),x(I,null,P(i.value,(d,O)=>(y(),T(h,{key:O,label:d.name_en,value:d.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled","loading"])]),_:1}),e(m,{field:"city",label:"\u5B9A\u4F4D\u57CE\u5E02",style:{width:"300px"}},{default:l(()=>[e($,{modelValue:n.value.city,"onUpdate:modelValue":o[4]||(o[4]=d=>n.value.city=d),placeholder:"\u8BF7\u9009\u62E9\u57CE\u5E02",disabled:!r.geo.city||!!n.value.state,"allow-search":"","allow-clear":"",loading:z(p),onPopupVisibleChange:o[5]||(o[5]=d=>{d&&U()})},{default:l(()=>[(y(!0),x(I,null,P(a.value,(d,O)=>(y(),T(h,{key:O,label:d.name_en,value:d.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled","loading"])]),_:1})]),_:1},8,["model"])])}}};const Ve={__name:"index",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(r,{emit:S}){const{loading:k,setLoading:g}=N(),w=S,c=r,p=L([]),v=L([]),s=F({get(){return c.modelValue},set(i){w("update:modelValue",i)}}),f=async()=>{try{g(!0);const{data:i}=await ie();s.value.port=i.port}catch{}finally{g(!1)}};return(async()=>{try{g(!0);const{data:i}=await ve(),a=i.login_white_list;i.proxy_white_list.forEach(n=>{a.includes(n)||a.push(n)}),p.value=a,v.value=i.proxy_users}catch{}finally{g(!1)}})(),(i,a)=>{const n=ee,t=R,b=A,U=E,_=le,o=J,h=K,$=H;return y(),x("div",null,[e($,{model:s.value,"auto-label-width":"","label-align":"left",loading:z(k)},{default:l(()=>[e(t,{field:"internal_name",label:"\u5185\u90E8\u540D\u79F0",style:{width:"280px"}},{default:l(()=>[e(n,{modelValue:s.value.internal_name,"onUpdate:modelValue":a[0]||(a[0]=m=>s.value.internal_name=m),placeholder:"\u8BF7\u8F93\u5165\u5185\u90E8\u540D\u79F0"},null,8,["modelValue"])]),_:1}),e(t,{field:"protocol",label:"\u4EE3\u7406\u534F\u8BAE",style:{width:"280px"}},{default:l(()=>[e(U,{modelValue:s.value.protocol,"onUpdate:modelValue":a[1]||(a[1]=m=>s.value.protocol=m),style:{width:"320px"},placeholder:"\u8BF7\u9009\u62E9\u4EE3\u7406\u534F\u8BAE"},{default:l(()=>[e(b,{label:"Skyproxy",value:"trojan"}),e(b,{label:"Socks5/HTTP(s)",value:"mixed"})]),_:1},8,["modelValue"])]),_:1}),e(t,{field:"port",label:"\u4EE3\u7406\u7AEF\u53E3",style:{width:"280px"}},{default:l(()=>[e(h,null,{default:l(()=>[e(_,{modelValue:s.value.port,"onUpdate:modelValue":a[2]||(a[2]=m=>s.value.port=m),"read-only":""},null,8,["modelValue"]),e(o,{type:"text",onClick:f},{default:l(()=>[C("\u91CD\u7F6E")]),_:1})]),_:1})]),_:1}),e(t,{field:"whitelist_ips",label:"\u767D\u540D\u5355IP"},{default:l(()=>[e(ce,{modelValue:s.value.whitelist_ips,"onUpdate:modelValue":a[3]||(a[3]=m=>s.value.whitelist_ips=m),list:p.value},null,8,["modelValue","list"])]),_:1}),e(t,{field:"proxy_users",label:"\u4EE3\u7406\u8D26\u53F7"},{default:l(()=>[e(_e,{modelValue:s.value.proxy_users,"onUpdate:modelValue":a[4]||(a[4]=m=>s.value.proxy_users=m),list:v.value},null,8,["modelValue","list"])]),_:1}),e(t,{field:"multiply",label:"\u6279\u91CF\u7AEF\u53E3"},{default:l(()=>[s.value.multiply==0?(y(),T(o,{key:0,type:"text",onClick:a[5]||(a[5]=m=>s.value.multiply=1)},{default:l(()=>[C("\u542F\u7528")]),_:1})):(y(),x(I,{key:1},[e(_,{modelValue:s.value.multiply,"onUpdate:modelValue":a[6]||(a[6]=m=>s.value.multiply=m),style:{width:"120px"},"default-value":500,precision:0,min:1,mode:"button"},null,8,["modelValue"]),e(o,{type:"text",onClick:a[7]||(a[7]=m=>s.value.multiply=0)},{default:l(()=>[C("\u5173\u95ED")]),_:1})],64))]),_:1})]),_:1},8,["model","loading"])])}}},xe={__name:"index",props:{modelValue:{type:Object,required:!0},geo:{type:Object,default:()=>({nation:!1,city:!1})}},emits:["update:modelValue"],setup(r,{emit:S}){const k=S,g=r,w=[{label:"Remote",value:"remote"},{label:"Local",value:"local"}],c=[{label:"Prefer IPv4",value:"prefer_ipv4"},{label:"Prefer IPv6",value:"prefer_ipv6"},{label:"IPv4 Only",value:"ipv4_only"},{label:"IPv6 Only",value:"ipv6_only"}],p=[{label:"10min",value:10},{label:"1min",value:1},{label:"5min",value:5},{label:"15min",value:15},{label:"30min",value:30},{label:"60min",value:60},{label:"rotate per request",value:0}],v=F({get(){return g.modelValue},set(s){k("update:modelValue",s)}});return(s,f)=>{const u=A,i=E,a=R,n=H;return y(),x("div",null,[e(n,{model:v.value,"auto-label-width":"","label-align":"left"},{default:l(()=>[e(a,{field:"session",label:"Session Duration",style:{width:"300px"}},{default:l(()=>[e(i,{modelValue:v.value.session,"onUpdate:modelValue":f[0]||(f[0]=t=>v.value.session=t)},{default:l(()=>[(y(),x(I,null,P(p,(t,b)=>e(u,{key:b,label:t.label,value:t.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(a,{field:"dns_mode",label:"DNS lookup",style:{width:"380px"}},{default:l(()=>[e(i,{modelValue:v.value.dns_mode,"onUpdate:modelValue":f[1]||(f[1]=t=>v.value.dns_mode=t)},{default:l(()=>[(y(),x(I,null,P(w,(t,b)=>e(u,{key:b,label:t.label,value:t.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(a,{field:"dns_strategy",label:"DNS strategy",style:{width:"380px"}},{default:l(()=>[e(i,{modelValue:v.value.dns_strategy,"onUpdate:modelValue":f[2]||(f[2]=t=>v.value.dns_strategy=t)},{default:l(()=>[(y(),x(I,null,P(c,(t,b)=>e(u,{key:b,label:t.label,value:t.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])])}}};const M=r=>(se("data-v-7e7aebf2"),r=r(),ue(),r),we={style:{padding:"22px"}},ke=M(()=>V("span",{style:{"font-weight":"bold","font-size":"18px"}},"\u4EE3\u7406\u901A\u9053",-1)),Le={style:{"font-weight":"bold","font-size":"18px"}},Ie={class:"tab"},Se=M(()=>V("span",null," \u5B9A\u4F4D ",-1)),Pe={style:{"padding-top":"16px"}},Ce={__name:"index",setup(r){const k=me().query.id,{loading:g,setLoading:w}=N(),c=L(1),p=L({area:null,state:null,city:null,internal_name:null,port:null,whitelist_ips:[],multiply:0,session:10,geo:{nation:!1,city:!1},zone_id:null,dns_mode:"remote",dns_strategy:"prefer_ipv4"}),v=async()=>{try{w(!0),await pe({...p.value}),ne.success("\u4FDD\u5B58\u6210\u529F"),W.back()}catch{}finally{w(!1)}};return(async()=>{try{w(!0);const{data:f}=await de({id:k});p.value=f}catch{}finally{w(!1)}})(),(f,u)=>{const i=K,a=J,n=Z,t=ae,b=G,U=Q,_=te;return y(),x("div",we,[e(_,{loading:z(g)},{default:l(()=>[e(re,{style:{"margin-bottom":"8px"}},{right:l(()=>[e(a,{type:"primary",onClick:v},{default:l(()=>[C("\u4FDD\u5B58\u8BBE\u7F6E")]),_:1})]),default:l(()=>[e(i,null,{default:l(()=>[ke,V("span",Le,oe(p.value.zone_name),1)]),_:1})]),_:1}),V("div",Ie,[e(t,{content:"\u8BF7\u9009\u62E9\u4EE3\u7406\u8F93\u51FA IP \u7684\u7279\u5B9A\u5B9A\u4F4D"},{default:l(()=>[V("div",{class:j(["tab-item",{active:c.value==1}]),onClick:u[0]||(u[0]=o=>c.value=1)},[e(n,{size:22}),Se],2)]),_:1}),e(t,{content:"\u5E38\u89C4\u914D\u7F6E,\u4F8B\u5982'\u7AEF\u53E3\u53F7'"},{default:l(()=>[V("div",{class:j(["tab-item",{active:c.value==2}]),onClick:u[1]||(u[1]=o=>c.value=2)},[e(b,{size:22}),C("\u901A\u7528 ")],2)]),_:1}),e(t,{content:"\u8BBE\u7F6E\u5728\u4EC0\u4E48\u60C5\u51B5\u4E0B IP \u5C06\u4F1A\u5207\u6362"},{default:l(()=>[V("div",{class:j(["tab-item",{active:c.value==3}]),onClick:u[2]||(u[2]=o=>c.value=3)},[e(U,{size:22}),C("IP\u63A7\u5236 ")],2)]),_:1})]),V("div",Pe,[B(V("div",null,[e(ge,{modelValue:p.value,"onUpdate:modelValue":u[3]||(u[3]=o=>p.value=o),geo:p.value.geo},null,8,["modelValue","geo"])],512),[[q,c.value==1]]),B(V("div",null,[e(Ve,{modelValue:p.value,"onUpdate:modelValue":u[4]||(u[4]=o=>p.value=o)},null,8,["modelValue"])],512),[[q,c.value==2]]),B(V("div",null,[e(xe,{modelValue:p.value,"onUpdate:modelValue":u[5]||(u[5]=o=>p.value=o)},null,8,["modelValue"])],512),[[q,c.value==3]])])]),_:1},8,["loading"])])}}},Ae=Y(Ce,[["__scopeId","data-v-7e7aebf2"]]);export{Ae as default};
