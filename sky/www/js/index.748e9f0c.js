import{e as F,_ as Y,f as Z,c as G,a as Q,r as W}from"../index.js";/* empty css              *//* empty css              *//* empty css               *//* empty css              */import{r as S,f as A,J as c,K as V,l as e,aP as a,u as z,F as I,b3 as C,aO as T,b7 as E,b8 as R,bk as H,bl as J,aZ as O,a_ as x,bm as ee,bn as le,aY as K,aX as M,be as te,bc as ae,N as g,L as B,b1 as D,bo as q,aT as oe}from"./arco.73db23e5.js";import{i as ne,T as se,s as ie}from"./index.a0d0d184.js";import{u as N}from"./loading.a8216e84.js";import{g as ue,u as de}from"./vue.57427092.js";import{I as re,P as pe,i as me}from"./passwords.ca46aa8c.js";/* empty css               */import"./vendor.7cd83524.js";const ce=()=>F.get("/position/area"),ve=f=>F.get("/position/state",{params:f}),_e=f=>F.get("/position/city",{params:f}),fe={__name:"index",props:{modelValue:{type:Object,required:!0},geo:{type:Object,default:()=>({nation:!1,city:!1})}},emits:["update:modelValue"],setup(f,{emit:k}){const{loading:L,setLoading:$}=N(),{loading:h,setLoading:b}=N(),{loading:m,setLoading:n}=N(),s=k,w=f,t=S([]),l=S([]),v=S([]),o=A({get(){return w.modelValue},set(u){s("update:modelValue",u)}}),i=async()=>{t.value=[];try{$(!0);const{data:u}=await ce();t.value=u}catch{}finally{$(!1)}},y=async()=>{if(l.value=[],!!o.value.area)try{b(!0);const{data:u}=await ve({area:o.value.area});l.value=u}catch{}finally{b(!1)}},U=async()=>{if(v.value=[],!(!o.value.area&&!o.value.state))try{n(!0);const{data:u}=await _e({area:o.value.area,state:o.value.state});v.value=u}catch{}finally{n(!1)}};return(u,r)=>{const _=E,p=R,j=H,X=J;return c(),V("div",null,[e(X,{model:o.value,"auto-label-width":"","label-align":"left"},{default:a(()=>[e(j,{field:"area",label:u.$t("position.location.nation"),style:{width:"300px"}},{default:a(()=>[e(p,{modelValue:o.value.area,"onUpdate:modelValue":r[0]||(r[0]=d=>o.value.area=d),placeholder:u.$t("position.select.nation"),disabled:!f.geo.nation,loading:z(L),"allow-search":"","allow-clear":"",onPopupVisibleChange:r[1]||(r[1]=d=>{d&&i()})},{default:a(()=>[(c(!0),V(I,null,C(t.value,(d,P)=>(c(),T(_,{key:P,label:d.name_en,value:d.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","disabled","loading"])]),_:1},8,["label"]),e(j,{field:"state",label:u.$t("position.location.state"),style:{width:"300px"}},{default:a(()=>[e(p,{modelValue:o.value.state,"onUpdate:modelValue":r[2]||(r[2]=d=>o.value.state=d),placeholder:u.$t("position.select.state"),disabled:!f.geo.city||!!o.value.city,"allow-search":"","allow-clear":"",loading:z(h),onPopupVisibleChange:r[3]||(r[3]=d=>{d&&y()})},{default:a(()=>[(c(!0),V(I,null,C(l.value,(d,P)=>(c(),T(_,{key:P,label:d.name_en,value:d.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","disabled","loading"])]),_:1},8,["label"]),e(j,{field:"city",label:u.$t("position.location.city"),style:{width:"300px"}},{default:a(()=>[e(p,{modelValue:o.value.city,"onUpdate:modelValue":r[4]||(r[4]=d=>o.value.city=d),placeholder:u.$t("position.select.city"),disabled:!f.geo.city||!!o.value.state,"allow-search":"","allow-clear":"",loading:z(m),onPopupVisibleChange:r[5]||(r[5]=d=>{d&&U()})},{default:a(()=>[(c(!0),V(I,null,C(v.value,(d,P)=>(c(),T(_,{key:P,label:d.name_en,value:d.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","disabled","loading"])]),_:1},8,["label"])]),_:1},8,["model"])])}}};const ye={__name:"index",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(f,{emit:k}){const{loading:L,setLoading:$}=N(),h=k,b=f,m=S([]),n=S([]),s=A({get(){return b.modelValue},set(t){h("update:modelValue",t)}});return(async()=>{try{$(!0);const{data:t}=await me(),l=t.login_white_list;t.proxy_white_list.forEach(v=>{l.includes(v)||l.push(v)}),m.value=l,n.value=t.proxy_users}catch{}finally{$(!1)}})(),(t,l)=>{const v=ee,o=H,i=E,y=R,U=le,u=K,r=M,_=J;return c(),V("div",null,[e(_,{model:s.value,"auto-label-width":"","label-align":"left",loading:z(L)},{default:a(()=>[e(o,{field:"internal_name",label:t.$t("normal.internal.name"),style:{width:"280px"}},{default:a(()=>[e(v,{modelValue:s.value.internal_name,"onUpdate:modelValue":l[0]||(l[0]=p=>s.value.internal_name=p),placeholder:t.$t("normal.placeholder.internal.name")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(o,{field:"protocol",label:t.$t("normal.proxy.protocol"),style:{width:"280px"}},{default:a(()=>[e(y,{modelValue:s.value.protocol,"onUpdate:modelValue":l[1]||(l[1]=p=>s.value.protocol=p),style:{width:"320px"},placeholder:t.$t("normal.select.proxy.protocol")},{default:a(()=>[e(i,{label:"Skyproxy",value:"trojan"}),e(i,{label:"Socks5/HTTP(s)",value:"mixed"})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),e(o,{field:"port",label:t.$t("normal.proxy.port"),style:{width:"280px"}},{default:a(()=>[e(u,null,{default:a(()=>[e(U,{modelValue:s.value.port,"onUpdate:modelValue":l[2]||(l[2]=p=>s.value.port=p),step:1,min:2e3,max:65e3,precision:0,mode:"button"},null,8,["modelValue"])]),_:1})]),_:1},8,["label"]),e(o,{field:"whitelist_ips",label:t.$t("normal.whitelist.ip")},{default:a(()=>[e(re,{modelValue:s.value.whitelist_ips,"onUpdate:modelValue":l[3]||(l[3]=p=>s.value.whitelist_ips=p),list:m.value},null,8,["modelValue","list"])]),_:1},8,["label"]),e(o,{field:"proxy_users",label:t.$t("normal.proxy.account")},{default:a(()=>[e(pe,{modelValue:s.value.proxy_users,"onUpdate:modelValue":l[4]||(l[4]=p=>s.value.proxy_users=p),list:n.value},null,8,["modelValue","list"])]),_:1},8,["label"]),e(o,{field:"multiply",label:t.$t("normal.batch.ports")},{default:a(()=>[s.value.multiply==0?(c(),T(r,{key:0,type:"text",onClick:l[5]||(l[5]=p=>s.value.multiply=1)},{default:a(()=>[O(x(t.$t("normal.enable")),1)]),_:1})):(c(),V(I,{key:1},[e(U,{modelValue:s.value.multiply,"onUpdate:modelValue":l[6]||(l[6]=p=>s.value.multiply=p),style:{width:"120px"},"default-value":500,precision:0,min:1,mode:"button"},null,8,["modelValue"]),e(r,{type:"text",onClick:l[7]||(l[7]=p=>s.value.multiply=0)},{default:a(()=>[O(x(t.$t("normal.disable")),1)]),_:1})],64))]),_:1},8,["label"])]),_:1},8,["model","loading"])])}}},be={__name:"index",props:{modelValue:{type:Object,required:!0},geo:{type:Object,default:()=>({nation:!1,city:!1})}},emits:["update:modelValue"],setup(f,{emit:k}){const L=k,$=f,h=[{label:"Remote",value:"remote"},{label:"Local",value:"local"}],b=[{label:"Prefer IPv4",value:"prefer_ipv4"},{label:"Prefer IPv6",value:"prefer_ipv6"},{label:"IPv4 Only",value:"ipv4_only"},{label:"IPv6 Only",value:"ipv6_only"}],m=[{label:"10min",value:10},{label:"15min",value:15},{label:"30min",value:30},{label:"60min",value:60}],n=A({get(){return $.modelValue},set(s){L("update:modelValue",s)}});return(s,w)=>{const t=E,l=R,v=H,o=J;return c(),V("div",null,[e(o,{model:n.value,"auto-label-width":"","label-align":"left"},{default:a(()=>[e(v,{field:"session",label:"Session Duration",style:{width:"300px"}},{default:a(()=>[e(l,{modelValue:n.value.session,"onUpdate:modelValue":w[0]||(w[0]=i=>n.value.session=i)},{default:a(()=>[(c(),V(I,null,C(m,(i,y)=>e(t,{key:y,label:i.label,value:i.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(v,{field:"dns_mode",label:"DNS lookup",style:{width:"380px"}},{default:a(()=>[e(l,{modelValue:n.value.dns_mode,"onUpdate:modelValue":w[1]||(w[1]=i=>n.value.dns_mode=i)},{default:a(()=>[(c(),V(I,null,C(h,(i,y)=>e(t,{key:y,label:i.label,value:i.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(v,{field:"dns_strategy",label:"DNS strategy",style:{width:"380px"}},{default:a(()=>[e(l,{modelValue:n.value.dns_strategy,"onUpdate:modelValue":w[2]||(w[2]=i=>n.value.dns_strategy=i)},{default:a(()=>[(c(),V(I,null,C(b,(i,y)=>e(t,{key:y,label:i.label,value:i.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])])}}};const ge={style:{padding:"22px"}},Ve={style:{"font-weight":"bold","font-size":"18px"}},we={style:{"font-weight":"bold","font-size":"18px"}},$e={class:"tab"},xe={style:{"padding-top":"16px"}},ke={__name:"index",setup(f){const k=ue(),{t:L}=de(),$=k.query.id,{loading:h,setLoading:b}=N(),m=S(1),n=S({area:null,state:null,city:null,internal_name:null,port:null,whitelist_ips:[],multiply:0,session:10,geo:{nation:!1,city:!1},zone_id:null,dns_mode:"remote",dns_strategy:"prefer_ipv4"}),s=async()=>{try{b(!0),await ie({...n.value}),oe.success(L("portsetting.save.success")),W.back()}catch{}finally{b(!1)}};return(async()=>{try{b(!0);const{data:t}=await ne({id:$});n.value=t}catch{}finally{b(!1)}})(),(t,l)=>{const v=K,o=M,i=Z,y=te,U=G,u=Q,r=ae;return c(),V("div",ge,[e(r,{loading:z(h)},{default:a(()=>[e(se,{style:{"margin-bottom":"8px"}},{right:a(()=>[e(o,{type:"primary",onClick:s},{default:a(()=>[O(x(t.$t("portsetting.save.settings")),1)]),_:1})]),default:a(()=>[e(v,null,{default:a(()=>[g("span",Ve,x(t.$t("portsetting.proxy.zone")),1),g("span",we,x(n.value.zone_name),1)]),_:1})]),_:1}),g("div",$e,[e(y,{content:t.$t("portsetting.select.specific.location")},{default:a(()=>[g("div",{class:B(["tab-item",{active:m.value==1}]),onClick:l[0]||(l[0]=_=>m.value=1)},[e(i,{size:22}),g("span",null,x(t.$t("portsetting.location")),1)],2)]),_:1},8,["content"]),e(y,{content:t.$t("portsetting.general.config")},{default:a(()=>[g("div",{class:B(["tab-item",{active:m.value==2}]),onClick:l[1]||(l[1]=_=>m.value=2)},[e(U,{size:22}),O(x(t.$t("portsetting.common")),1)],2)]),_:1},8,["content"]),e(y,{content:t.$t("portsetting.switch.ip.conditions")},{default:a(()=>[g("div",{class:B(["tab-item",{active:m.value==3}]),onClick:l[2]||(l[2]=_=>m.value=3)},[e(u,{size:22}),O(x(t.$t("portsetting.ip.control")),1)],2)]),_:1},8,["content"])]),g("div",xe,[D(g("div",null,[e(fe,{modelValue:n.value,"onUpdate:modelValue":l[3]||(l[3]=_=>n.value=_),geo:n.value.geo},null,8,["modelValue","geo"])],512),[[q,m.value==1]]),D(g("div",null,[e(ye,{modelValue:n.value,"onUpdate:modelValue":l[4]||(l[4]=_=>n.value=_)},null,8,["modelValue"])],512),[[q,m.value==2]]),D(g("div",null,[e(be,{modelValue:n.value,"onUpdate:modelValue":l[5]||(l[5]=_=>n.value=_)},null,8,["modelValue"])],512),[[q,m.value==3]])])]),_:1},8,["loading"])])}}},Be=Y(ke,[["__scopeId","data-v-c3e0ed7c"]]);export{Be as default};
