import{e as A,_ as G,f as Q,c as W,a as ee,r as le}from"../index.js";/* empty css              *//* empty css              *//* empty css               *//* empty css              */import{r as S,f as E,J as c,K as g,l as e,aP as a,u as h,N as y,F as C,b3 as U,aO as T,aZ as P,a_ as $,b7 as R,b8 as H,bl as J,bm as K,bn as te,bo as ae,aY as X,aX as Y,be as oe,bc as ne,L as F,b1 as D,bp as q,aT as se}from"./arco.4b5efef7.js";import{F as M,i as ue,T as ie,s as re}from"./index.e143093a.js";import{u as N}from"./loading.3da5f6c1.js";import{g as de,u as pe}from"./vue.54530f4c.js";import{I as me,P as ce,i as ve}from"./passwords.469823f3.js";/* empty css               */import"./vendor.339f51bb.js";const _e=()=>A.get("/position/area"),fe=_=>A.get("/position/state",{params:_}),ye=_=>A.get("/position/city",{params:_}),be={__name:"index",props:{modelValue:{type:Object,required:!0},geo:{type:Object,default:()=>({nation:!1,city:!1})}},emits:["update:modelValue"],setup(_,{emit:x}){const{loading:L,setLoading:w}=N(),{loading:k,setLoading:b}=N(),{loading:m,setLoading:n}=N(),s=x,V=_,t=S([]),l=S([]),v=S([]),o=E({get(){return V.modelValue},set(i){s("update:modelValue",i)}}),r=async()=>{t.value=[];try{w(!0);const{data:i}=await _e();t.value=i}catch{}finally{w(!1)}},f=async()=>{if(l.value=[],!!o.value.area)try{b(!0);const{data:i}=await fe({area:o.value.area});l.value=i}catch{}finally{b(!1)}},I=async()=>{if(v.value=[],!(!o.value.area&&!o.value.state))try{n(!0);const{data:i}=await ye({area:o.value.area,state:o.value.state});v.value=i}catch{}finally{n(!1)}},z=()=>{o.value.state="",o.value.city=""};return(i,u)=>{const p=R,j=H,B=J,Z=K;return c(),g("div",null,[e(Z,{model:o.value,"auto-label-width":"","label-align":"left"},{default:a(()=>[e(B,{field:"area",label:i.$t("position.location.nation"),style:{width:"340px"}},{default:a(()=>[e(j,{modelValue:o.value.area,"onUpdate:modelValue":u[0]||(u[0]=d=>o.value.area=d),placeholder:i.$t("position.select.nation"),disabled:!_.geo.nation,loading:h(L),"allow-search":"","allow-clear":"",onPopupVisibleChange:u[1]||(u[1]=d=>{d&&r()}),onChange:z},{prefix:a(()=>[y("span",null,[e(h(M),{country:o.value.area,size:"small"},null,8,["country"])])]),default:a(()=>[(c(!0),g(C,null,U(t.value,(d,O)=>(c(),T(p,{key:O,value:d.code},{default:a(()=>[y("span",null,[e(h(M),{country:d.code,size:"small"},null,8,["country"])]),P(" "+$(d.name_en),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","placeholder","disabled","loading"])]),_:1},8,["label"]),e(B,{field:"state",label:i.$t("position.location.state"),style:{width:"340px"}},{default:a(()=>[e(j,{modelValue:o.value.state,"onUpdate:modelValue":u[2]||(u[2]=d=>o.value.state=d),placeholder:i.$t("position.select.state"),disabled:!_.geo.city||!!o.value.city,"allow-search":"","allow-clear":"",loading:h(k),onPopupVisibleChange:u[3]||(u[3]=d=>{d&&f()})},{default:a(()=>[(c(!0),g(C,null,U(l.value,(d,O)=>(c(),T(p,{key:O,label:d.name_en,value:d.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","disabled","loading"])]),_:1},8,["label"]),e(B,{field:"city",label:i.$t("position.location.city"),style:{width:"340px"}},{default:a(()=>[e(j,{modelValue:o.value.city,"onUpdate:modelValue":u[4]||(u[4]=d=>o.value.city=d),placeholder:i.$t("position.select.city"),disabled:!_.geo.city||!!o.value.state,"allow-search":"","allow-clear":"",loading:h(m),onPopupVisibleChange:u[5]||(u[5]=d=>{d&&I()})},{default:a(()=>[(c(!0),g(C,null,U(v.value,(d,O)=>(c(),T(p,{key:O,label:d.name_en,value:d.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","disabled","loading"])]),_:1},8,["label"])]),_:1},8,["model"])])}}};const ge={__name:"index",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(_,{emit:x}){const{loading:L,setLoading:w}=N(),k=x,b=_,m=S([]),n=S([]),s=E({get(){return b.modelValue},set(t){k("update:modelValue",t)}});return(async()=>{try{w(!0);const{data:t}=await ve(),l=t.login_white_list;t.proxy_white_list.forEach(v=>{l.includes(v)||l.push(v)}),m.value=l,n.value=t.proxy_users}catch{}finally{w(!1)}})(),(t,l)=>{const v=te,o=J,r=R,f=H,I=ae,z=X,i=Y,u=K;return c(),g("div",null,[e(u,{model:s.value,"auto-label-width":"","label-align":"left",loading:h(L)},{default:a(()=>[e(o,{field:"internal_name",label:t.$t("normal.internal.name"),style:{width:"280px"}},{default:a(()=>[e(v,{modelValue:s.value.internal_name,"onUpdate:modelValue":l[0]||(l[0]=p=>s.value.internal_name=p),placeholder:t.$t("normal.placeholder.internal.name")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(o,{field:"protocol",label:t.$t("normal.proxy.protocol"),style:{width:"280px"}},{default:a(()=>[e(f,{modelValue:s.value.protocol,"onUpdate:modelValue":l[1]||(l[1]=p=>s.value.protocol=p),style:{width:"320px"},placeholder:t.$t("normal.select.proxy.protocol")},{default:a(()=>[e(r,{label:"Skyproxy",value:"trojan"}),e(r,{label:"Socks5/HTTP(s)",value:"mixed"})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),e(o,{field:"port",label:t.$t("normal.proxy.port"),style:{width:"280px"}},{default:a(()=>[e(z,null,{default:a(()=>[e(I,{modelValue:s.value.port,"onUpdate:modelValue":l[2]||(l[2]=p=>s.value.port=p),step:1,min:2e3,max:65e3,precision:0,mode:"button"},null,8,["modelValue"])]),_:1})]),_:1},8,["label"]),e(o,{field:"whitelist_ips",label:t.$t("normal.whitelist.ip")},{default:a(()=>[e(me,{modelValue:s.value.whitelist_ips,"onUpdate:modelValue":l[3]||(l[3]=p=>s.value.whitelist_ips=p),list:m.value},null,8,["modelValue","list"])]),_:1},8,["label"]),e(o,{field:"proxy_users",label:t.$t("normal.proxy.account")},{default:a(()=>[e(ce,{modelValue:s.value.proxy_users,"onUpdate:modelValue":l[4]||(l[4]=p=>s.value.proxy_users=p),list:n.value},null,8,["modelValue","list"])]),_:1},8,["label"]),e(o,{field:"multiply",label:t.$t("normal.batch.ports")},{default:a(()=>[s.value.multiply==0?(c(),T(i,{key:0,type:"text",onClick:l[5]||(l[5]=p=>s.value.multiply=1)},{default:a(()=>[P($(t.$t("normal.enable")),1)]),_:1})):(c(),g(C,{key:1},[e(I,{modelValue:s.value.multiply,"onUpdate:modelValue":l[6]||(l[6]=p=>s.value.multiply=p),style:{width:"120px"},"default-value":500,precision:0,min:1,mode:"button"},null,8,["modelValue"]),e(i,{type:"text",onClick:l[7]||(l[7]=p=>s.value.multiply=0)},{default:a(()=>[P($(t.$t("normal.disable")),1)]),_:1})],64))]),_:1},8,["label"])]),_:1},8,["model","loading"])])}}},Ve={__name:"index",props:{modelValue:{type:Object,required:!0},geo:{type:Object,default:()=>({nation:!1,city:!1})}},emits:["update:modelValue"],setup(_,{emit:x}){const L=x,w=_,k=[{label:"Remote",value:"remote"},{label:"Local",value:"local"}],b=[{label:"Prefer IPv4",value:"prefer_ipv4"},{label:"Prefer IPv6",value:"prefer_ipv6"},{label:"IPv4 Only",value:"ipv4_only"},{label:"IPv6 Only",value:"ipv6_only"}],m=[{label:"10min",value:10},{label:"15min",value:15},{label:"30min",value:30},{label:"60min",value:60}],n=E({get(){return w.modelValue},set(s){L("update:modelValue",s)}});return(s,V)=>{const t=R,l=H,v=J,o=K;return c(),g("div",null,[e(o,{model:n.value,"auto-label-width":"","label-align":"left"},{default:a(()=>[e(v,{field:"session",label:"Session Duration",style:{width:"300px"}},{default:a(()=>[e(l,{modelValue:n.value.session,"onUpdate:modelValue":V[0]||(V[0]=r=>n.value.session=r)},{default:a(()=>[(c(),g(C,null,U(m,(r,f)=>e(t,{key:f,label:r.label,value:r.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(v,{field:"dns_mode",label:"DNS lookup",style:{width:"380px"}},{default:a(()=>[e(l,{modelValue:n.value.dns_mode,"onUpdate:modelValue":V[1]||(V[1]=r=>n.value.dns_mode=r)},{default:a(()=>[(c(),g(C,null,U(k,(r,f)=>e(t,{key:f,label:r.label,value:r.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(v,{field:"dns_strategy",label:"DNS strategy",style:{width:"380px"}},{default:a(()=>[e(l,{modelValue:n.value.dns_strategy,"onUpdate:modelValue":V[2]||(V[2]=r=>n.value.dns_strategy=r)},{default:a(()=>[(c(),g(C,null,U(b,(r,f)=>e(t,{key:f,label:r.label,value:r.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])])}}};const we={style:{padding:"22px"}},$e={style:{"font-weight":"bold","font-size":"18px"}},xe={style:{"font-weight":"bold","font-size":"18px"}},Le={class:"tab"},ke={style:{"padding-top":"16px"}},he={__name:"index",setup(_){const x=de(),{t:L}=pe(),w=x.query.id,{loading:k,setLoading:b}=N(),m=S(1),n=S({area:null,state:null,city:null,internal_name:null,port:null,whitelist_ips:[],multiply:0,session:10,geo:{nation:!1,city:!1},zone_id:null,dns_mode:"remote",dns_strategy:"prefer_ipv4"}),s=async()=>{try{b(!0),await re({...n.value}),se.success(L("portsetting.save.success")),le.back()}catch{}finally{b(!1)}};return(async()=>{try{b(!0);const{data:t}=await ue({id:w});n.value=t}catch{}finally{b(!1)}})(),(t,l)=>{const v=X,o=Y,r=Q,f=oe,I=W,z=ee,i=ne;return c(),g("div",we,[e(i,{loading:h(k)},{default:a(()=>[e(ie,{style:{"margin-bottom":"8px"}},{right:a(()=>[e(o,{type:"primary",onClick:s},{default:a(()=>[P($(t.$t("portsetting.save.settings")),1)]),_:1})]),default:a(()=>[e(v,null,{default:a(()=>[y("span",$e,$(t.$t("portsetting.proxy.zone")),1),y("span",xe,$(n.value.zone_name),1)]),_:1})]),_:1}),y("div",Le,[e(f,{content:t.$t("portsetting.select.specific.location")},{default:a(()=>[y("div",{class:F(["tab-item",{active:m.value==1}]),onClick:l[0]||(l[0]=u=>m.value=1)},[e(r,{size:22}),y("span",null,$(t.$t("portsetting.location")),1)],2)]),_:1},8,["content"]),e(f,{content:t.$t("portsetting.general.config")},{default:a(()=>[y("div",{class:F(["tab-item",{active:m.value==2}]),onClick:l[1]||(l[1]=u=>m.value=2)},[e(I,{size:22}),P($(t.$t("portsetting.common")),1)],2)]),_:1},8,["content"]),e(f,{content:t.$t("portsetting.switch.ip.conditions")},{default:a(()=>[y("div",{class:F(["tab-item",{active:m.value==3}]),onClick:l[2]||(l[2]=u=>m.value=3)},[e(z,{size:22}),P($(t.$t("portsetting.ip.control")),1)],2)]),_:1},8,["content"])]),y("div",ke,[D(y("div",null,[e(be,{modelValue:n.value,"onUpdate:modelValue":l[3]||(l[3]=u=>n.value=u),geo:n.value.geo},null,8,["modelValue","geo"])],512),[[q,m.value==1]]),D(y("div",null,[e(ge,{modelValue:n.value,"onUpdate:modelValue":l[4]||(l[4]=u=>n.value=u)},null,8,["modelValue"])],512),[[q,m.value==2]]),D(y("div",null,[e(Ve,{modelValue:n.value,"onUpdate:modelValue":l[5]||(l[5]=u=>n.value=u)},null,8,["modelValue"])],512),[[q,m.value==3]])])]),_:1},8,["loading"])])}}},De=G(he,[["__scopeId","data-v-c3e0ed7c"]]);export{De as default};
